name: Build python package
#build and test on the three OS

on:
  workflow_dispatch:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
        
  Linux:
    name: Linux
    runs-on: "ubuntu-latest"
    steps:
    
      - uses: actions/checkout@v4
      
      - uses: astral-sh/setup-uv@v6
      - run: uv python install
      
      - run: sudo apt update && sudo apt install -y libarmadillo-dev libboost-dev

      - run: uv sync --locked --all-extras --dev

      - run: uv run pytest   

  MacOS:
    name: MacOS
    runs-on: "macos-latest"
    steps:
      - uses: actions/checkout@v4
      
      - uses: astral-sh/setup-uv@v6
      - run: uv python install

      - run: brew install armadillo boost googletest

      - run: uv sync --locked --all-extras --dev

      - run: uv run pytest                  
